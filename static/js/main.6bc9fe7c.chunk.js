(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},24:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),i=(n(24),n(5)),u=n(3),l=(n(26),n(8)),s=n(9),f={C:0,"C#":1,Db:1,D:2,"D#":3,Eb:3,E:4,F:5,"F#":6,Gb:6,G:7,"G#":8,Ab:8,A:9,"A#":10,Bb:10,B:11},m=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],h=function(){function e(t,n){Object(l.a)(this,e),this.tone=t,this.octave=n}return Object(s.a)(e,[{key:"toString",value:function(){return this.tone}},{key:"toSpn",value:function(){return this.tone+this.octave}},{key:"toneEquals",value:function(e){return f[this.tone]===f[e.tone]}}]),e}();function d(e){return"string"!==typeof e?e:3===e.length?new h(e[0]+e[1],parseInt(e[2])):new h(e[0],parseInt(e[1]))}function p(e,t){var n=f[d(e).tone],r=f[t]-n;return r<0&&(r+=12),r}function g(e,t){var n=f[e.tone],r=e.octave,a=n+t%12;return a<0?(a+=12,r--):a>=12&&(a-=12,r++),r+=t/12|0,new h(m[a],r)}var v=function(){function e(t,n){Object(l.a)(this,e),this.name=t,this.notes=void 0,this.notes=n.map(d)}return Object(s.a)(e,[{key:"toString",value:function(){return this.notes.join("-")}},{key:"positionToNote",value:function(e,t){return g(this.notes[e],t)}}]),e}(),b=[new v("Standard",["E2","A2","D3","G3","B3","E4"]),new v("Open A",["E2","A2","C#3","E3","A3","E4"]),new v("Open B",["B2","F#2","B3","F#3","B3","D#4"]),new v("Open C",["C2","G2","C3","G3","C4","E4"]),new v("Open D",["D2","A2","D3","F#3","A3","D4"]),new v("Open E",["E2","B2","E3","G#3","B3","E4"]),new v("Open F",["F2","A2","C3","F3","C4","F4"]),new v("Open F#",["F#2","A#2","C#3","F#3","C#4","F#4"]),new v("Open G",["D2","G2","D3","G3","B3","D4"])],E={Unison:0,MinorSecond:1,MajorSecond:2,MinorThird:3,MajorThird:4,PerfectFourth:5,PerfectFifth:7,MinorSixth:8,MajorSixth:9,MinorSeventh:11,Ocatve:12},O={Major:{name:"Major",short:"",long:"maj"},Minor:{name:"Minor",short:"m",long:"min"},Augmented:{name:"Augmented",short:"+",long:"aug"},Diminished:{name:"Diminished",short:"o",long:"dim"}},j=function(){function e(t,n,r){Object(l.a)(this,e),this.quality=t,this.notes=void 0,this.notes=[n].concat(Object(i.a)(r.map(function(e){return g(n,e)})))}return Object(s.a)(e,[{key:"shortName",value:function(){return this.notes[0].tone+this.quality.short}},{key:"longName",value:function(){return this.notes[0].tone+this.quality.long}},{key:"rootNote",get:function(){return this.notes[0]}}]),e}();function w(e){return Math.floor(Math.random()*Math.floor(e))}function y(e,t){var n=e.length;return e.map(function(e,r){return t(e,r,{first:0===r,last:r===n-1,length:n})})}n(28),n(30);var C=function(e){var t,n=e.num;return a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"Fret-number",style:{gridArea:"top / f".concat(n)}},n+1),a.a.createElement("div",{className:"Fret",style:{gridArea:"top-edge / f".concat(n," / bottom-edge / f").concat(n+1)}},2===(t=n)||4===t||6===t||8===t||14===t?a.a.createElement("span",{className:"dot single"}):11===t?a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:"dot double1"}),a.a.createElement("span",{className:"dot double2"})):null))},x=(n(32),{quiz:"Note-quiz",indicator:"Note-indicator",chordRoot:"Note-chord-root"}),A=function(e){var t,n=e.note,r=e.type,o=e.showOctave,c=e.gridArea;return t="quiz"===(r=r||"indicator")?"?":a.a.createElement("span",null,n.tone,o?a.a.createElement("sub",null,n.octave):null),a.a.createElement("div",{className:"Note "+x[r],style:{gridArea:c}},t)},M=Object(r.createContext)({showOctave:!1,tuning:b[0],fretCount:14,update:function(){}}),N=100,S=function(e,t){return"s".concat(e+1," / span 1 / s").concat(e+1," / f").concat(t)};var F=function(e){var t=e.children,n=e.fretCount,o=e.tuning,c=e.notes,i=Object(r.useMemo)(function(){var e=function(e){for(var t=[],n=10,r=0;r<e;r++){var a=n/17.817;n-=a,t.push(a)}return t}(n);return[e,function(e){return"[start] auto [head] "+N+"px "+y(e,function(e,t,n){return(n.first?"[nut f0] ":"")+e+"fr [f"+(t+1)+(n.last?" fretboard-end]":"]")}).join(" ")+" auto [end]"}(e)]},[n]),l=Object(u.a)(i,2),s=l[0],f=l[1],m=Object(r.useContext)(M).showOctave,h=Object(r.useMemo)(function(){return function(e){var t=e.notes.length;return"[top] auto "+y(e.notes,function(e,n,r){return(r.first?"[top-edge ":"[")+"s"+(t-n)+"] 40px"}).join(" ")+" [bottom-edge s0]"}(o)},[o]);return a.a.createElement("div",{className:"Fretboard",style:{gridTemplateColumns:f,gridTemplateRows:h}},a.a.createElement("div",{className:"Fretboard-head",style:{gridArea:"top-edge / head / bottom-edge / nut"}}),a.a.createElement("div",{className:"Fretboard-fingerboard",style:{gridArea:"top-edge / nut / bottom-edge / fretboard-end"}}),t,c.map(function(e,t){return a.a.createElement(A,Object.assign({key:"note_"+t,showOctave:m},e))}),s.map(function(e,t){return a.a.createElement(C,{key:"fret"+t,num:t})}))},k=function(e,t){var n=e.reduce(function(e,t,n){return t&&e.push(n),e},[]);return{type:"note",string:n[w(n.length)],fret:w(t)}},D=function(e){var t=e.content,n=e.includedStrings,o=Object(r.useContext)(M),c=o.fretCount,i=o.tuning,l=Object(r.useState)(""),s=Object(u.a)(l,2),m=s[0],h=s[1],d=Object(r.useState)(null),p=Object(u.a)(d,2),g=p[0],v=p[1],b=Object(r.useState)(function(){return k(n,c)}),E=Object(u.a)(b,2),O=E[0],j=E[1],w=function(e){var t,r,a=i.positionToNote(O.string,O.fret);t=m,r=a.toString(),f.hasOwnProperty(t)&&f.hasOwnProperty(r)&&f[t]===f[r]?(j(k(n,c)),v({correct:!0,id:Date.now()})):v({correct:!1,id:Date.now()}),h(""),e.preventDefault()};n[O.string]||j(k(n,c));var y=[{note:i.positionToNote(O.string,O.fret),type:"quiz",gridArea:S(O.string,O.fret)}];return a.a.createElement(a.a.Fragment,null,t(y),a.a.createElement("div",{className:"Quiz"},a.a.createElement("form",{className:"App-question",onSubmit:function(e){return w(e)}},a.a.createElement("h1",null,"What is the higlighted note?"),a.a.createElement("input",{className:"App-answer-field",type:"text",value:m,onChange:function(e){return h(e.target.value)}}),g?a.a.createElement("div",{className:"App-judgement "+(g.correct?"correct":"incorrect"),key:g.id},g.correct?"Correct":"Incorrect"):null)))},B=function(e){var t=e.activeStrings,n=e.onToggle,o=Object(r.useContext)(M).tuning;return a.a.createElement(a.a.Fragment,null,o.notes.map(function(e,o,c){var i=c.length,u=Math.max(1,Math.round((i-(o+1))/i*3));return a.a.createElement(r.Fragment,{key:o},a.a.createElement("div",{onClick:function(){return n(o)},className:"root-note "+(t[o]?"included":"excluded"),style:{gridArea:"s".concat(o+1," / fretboard-end")}},e.tone),a.a.createElement("div",{className:"string",style:{height:"50%",gridArea:"s".concat(o," / head / s").concat(o+1," / fretboard-end"),borderBottom:"".concat(u,"px solid yellow")}}))}))},T=n(17),q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;Object(l.a)(this,e),this.fretCount=t,this.tuningCache=new Map}return Object(s.a)(e,[{key:"getVoicings",value:function(e,t){var n=this.tuningCache.get(e);n||this.tuningCache.set(e,n=new Map);var r=n.get(t);return r||n.set(t,r=function(e,t,n){var r={root:[],inversions:[]};return function a(o,c,u,l){if(0!==o.length){for(var s=Object(T.a)(o),f=s[0],m=s.slice(1),h=c.filter(function(e){return null!==e}),d=Math.min.apply(Math,Object(i.a)(h)),v=Math.max.apply(Math,Object(i.a)(h)),b=0,E=function(e){for(var t=p(f,u[e].toString()),r=t;r<n+1;r+=12){var o=Math.min(r,d),s=Math.max(r,v);s-o>4||(a(m,Object(i.a)(c).concat([r]),u.filter(function(t,n){return n!==e}),Object(i.a)(l).concat([u[e]])),b++)}},O=0;O<u.length;O++)E(O);if(e.notes.length-c.length>u.length){for(var O=0;O<l.length;O++)for(var j=p(f,l[O].toString()),w=j;w<n+1;w+=12){var y=Math.min(w,d),C=Math.max(w,v);C-y>4||(a(m,Object(i.a)(c).concat([w]),u,l),b++)}0!==b&&0!==l.length||a(m,Object(i.a)(c).concat([null]),u,l)}}else 0===u.length&&function(n){var a=new G(n),o=n.findIndex(function(e){return null!==e});g(e.notes[o],n[o]).tone!==t.notes[0].tone?r.inversions.push(a):r.root.push(a)}(c)}(e.notes,[],t.notes,[]),r.root.sort(function(e,t){return e.distance-t.distance}),r.inversions.sort(function(e,t){return e.distance-t.distance}),r}(e,t,this.fretCount)),r}}]),e}(),G=function(){function e(t){var n=this;Object(l.a)(this,e),this.notes=t,this.minFret=void 0,this.maxFret=void 0,this.distance=void 0,this.strValue=void 0;var r=t.filter(function(e){return null!==e});this.minFret=Math.min.apply(Math,Object(i.a)(r)),this.maxFret=Math.max.apply(Math,Object(i.a)(r)),this.distance=t.reduce(function(e,t){return e+(null===t?n.maxFret+1:t)},0),this.notes=t,this.strValue=this.notes.map(function(e){return null===e?"x":e}).join(" ")}return Object(s.a)(e,[{key:"toString",value:function(){return this.strValue}}]),e}();n(34);var R=n(14),I=n.n(R),P=a.a.memo(function(e){var t=e.options,n=e.className,o=e.value,c=e.onSelect,i=Object(r.useRef)(null),l=Object(r.useState)(!1),s=Object(u.a)(l,2),f=s[0],m=(s[1],Object(r.useState)(null)),h=Object(u.a)(m,2),d=h[0],p=(h[1],Object(r.useState)("")),g=Object(u.a)(p,2),v=g[0],b=(g[1],Object(r.useState)(null)),E=Object(u.a)(b,2),O=E[0];E[1];function j(){if(i.current)i.current.querySelector('[role="option"]')}return a.a.createElement("ul",{ref:i,className:I()("Listbox",n),role:"listbox",onFocus:function(){O||j()},onKeyDown:function(e){var t=e.key;if(O){var n=document.getElementById(O);if(n)switch(t){case"PageUp":case"PageDown":f&&e.preventDefault();break;case"ArrowUp":case"ArrowDown":if(e.preventDefault(),f&&e.altKey)return;n="ArrowUp"===t?n.previousElementSibling:n.nextElementSibling;break;case"Home":e.preventDefault(),j();break;case"End":e.preventDefault(),function(){if(i.current){var e=i.current.querySelectorAll('[role="option"]');e.length&&e[e.length-1]}}();break;case"Space":e.preventDefault();break;case"Backspace":case"Delete":case"Return":if(!d)return;break;default:!function(e){if(!i.current)return null;var t=i.current.querySelectorAll('[role="option"]');if(v)for(var n=0;n<v.length;n++)t[n].getAttribute("id")}()}}}},t.map(function(e,t){return a.a.createElement("li",{key:t,className:I()("Listbox-item",{selected:o===e}),role:"option",onClick:function(){return c(e)}},e.toString())}))}),z=(n(36),function(e){var t=e.content,n=e.match,o=e.history,c=Object(r.useContext)(M),i=c.tuning,l=c.fretCount,s=n?n.params:{chordRoot:"A",chordType:"Major"},f=s.chordRoot,m=s.chordType;f=decodeURIComponent(f);var h=Object(r.useMemo)(function(){return new q(l)},[]),p=Object(r.useState)(0),v=Object(u.a)(p,2),b=v[0],w=v[1],y=Object(r.useMemo)(function(){return"Major"==m?(e=d(e=f+"3"),new j(O.Major,e,[E.MajorThird,E.PerfectFifth])):function(e){return e=d(e),new j(O.Minor,e,[E.MinorThird,E.PerfectFifth])}(f+"3");var e},[f,m]),C=Object(r.useMemo)(function(){return w(b=0),h.getVoicings(i,y).root},[i,y]),x=C[b],A=function(e){e<0?e=0:e>=C.length&&(e=C.length-1),w(e)},N=Object(r.useMemo)(function(){var e=[];return x.notes.forEach(function(t,n){if(null!==t){var r=g(i.notes[n],t);e.push({type:r.tone===y.rootNote.tone?"chordRoot":"indicator",note:r,gridArea:S(n,t)})}}),e},[x]);return a.a.createElement(a.a.Fragment,null,t(N),a.a.createElement("div",{className:"Explorer"},a.a.createElement("label",{className:"Explorer-chord-label"},"Root"),a.a.createElement(P,{className:"Explorer-chord",options:["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"],value:f,onSelect:function(e){return o.push("/explore/".concat(encodeURIComponent(e),"/").concat(m))}}),a.a.createElement("label",{className:"Explorer-chord-root-label"},"Chord"),a.a.createElement(P,{className:"Explorer-chord-root",options:["Major","Minor"],value:m,onSelect:function(e){return o.push("/explore/".concat(encodeURIComponent(f),"/").concat(e))}}),a.a.createElement("label",{className:"Explorer-voicings-label"},C.length," voicings"),a.a.createElement(P,{className:"Explorer-voicings",options:C,value:x,onSelect:function(e){return w(C.indexOf(e))}}),a.a.createElement("div",{className:"Explorer-voicings-nav"},a.a.createElement("button",{onClick:function(){return w(0)}},"|<"),a.a.createElement("button",{onClick:function(){return A(b-1)}},"<"),a.a.createElement("button",{onClick:function(){return A(b+1)}},">"),a.a.createElement("button",{onClick:function(){return A(C.length-1)}},">|"))))}),U=function(){var e=Object(r.useContext)(M),t=e.tuning,n=e.showOctave,o=e.update;return a.a.createElement("div",{className:"App-options"},a.a.createElement("label",{className:"App-tuning"},"Tuning"),a.a.createElement("select",{className:"App-tuning",value:t.name,onChange:function(e){o({tuning:b.find(function(t){return t.name===e.currentTarget.value})||t})}},b.map(function(e,t){return a.a.createElement("option",{key:t},e.name)})),a.a.createElement("label",{className:"App-show-octave"},a.a.createElement("input",{type:"checkbox",checked:n,onChange:function(){return o({showOctave:!n})}})," Show octave"))},V=n(44),W=n(46),J=n(42),K=n(45),L=function(){var e=Object(r.useState)(b[0]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(!0),l=Object(u.a)(c,2),s=l[0],f=l[1],m=Object(r.useState)(function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0;r<e;r++)n.push(t);return n}(n.notes.length)),h=Object(u.a)(m,2),d=h[0],p=h[1],g=function(e){var t=Object(i.a)(d);t[e]=!t[e],p(t)},v=function(e){return a.a.createElement(F,{fretCount:15,tuning:n,notes:e},a.a.createElement(B,{activeStrings:d,onToggle:g}))};return a.a.createElement(V.a,null,a.a.createElement("div",{className:"App"},a.a.createElement(M.Provider,{value:{showOctave:s,tuning:n,fretCount:15,update:function(e){"undefined"!==typeof e.showOctave&&f(e.showOctave),e.tuning&&o(e.tuning)}}},a.a.createElement("header",{className:"App-header"},a.a.createElement("h1",{className:"App-title"},"Fretfull"),a.a.createElement("nav",{className:"App-nav"},a.a.createElement(W.a,{exact:!0,to:"/"},"Explore"),a.a.createElement(W.a,{to:"/quiz"},"Quiz")),a.a.createElement(U,null)),a.a.createElement(J.a,{exact:!0,path:"/",render:function(){return a.a.createElement(K.a,{to:"/explore/A/Major"})}}),a.a.createElement(J.a,{exact:!0,path:"/explore/:chordRoot/:chordType",render:function(e){return a.a.createElement(z,Object.assign({content:v},e))}}),a.a.createElement(J.a,{path:"/quiz",render:function(){return a.a.createElement(D,{includedStrings:d,content:v})}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[18,2,1]]]);
//# sourceMappingURL=main.6bc9fe7c.chunk.js.map